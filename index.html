<!DOCTYPE>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
    <title>Berry Index</title>
    
    <script type="text/javascript" charset="UTF-8" src="berry.js"></script>
  </head>
  <body>
    <script>
	/*
		// опрделение модуля 'oldmenu' с поддержкой обратной совместимости
		$.define('oldmenu', function() {
			console.log("module 'oldmenu' loaded");
			var a = 2;
			return a;
		});

		// опрделение модуля 'item' с зависимостью от модуля 'menu'
		define('item', ['menu'], function() {
			console.log("module 'item' loaded, depence from 'menu'");
		});
	*/
		/*
		// опрделение модуля 'jquery.1.7.1' с указанным path в обьекте
		define('jquery.1.7.1', {path: 'https://code.jquery.com/jquery-1.7.1.min.js'}, function() {
			console.log("module 'jquery.1.7.1' loaded", arguments);
			
			return $;
		});

		// опрделение модуля 'jquery.1.12.4' с указанным path в обьекте (изменено следование аргументов для примера работы)
		define('jquery.1.12.4', function() {
			console.log("module 'jquery.1.12.4' loaded", arguments);
			
			return $;
		}, {path: 'https://code.jquery.com/jquery-1.12.4.min.js'});
		
	  		*/
		
		/*
		//кастомный список плагинов проекта
		var plugins = {
			"test.module" : {
				"path" : "berry.test.js"
			},
			"jquery.1.7.1" : {
				"path" : "https://code.jquery.com/jquery-1.7.1.min.js",
				"callback" : function() {
					return 123;
				}
			},
			"jquery.1.12.4" : {
				"path" : "https://code.jquery.com/jquery-1.12.4.min.js"
			},
			"jquery.2.2.4" : {
				"path" : "https://code.jquery.com/jquery-2.2.4.min.js"
			}
		}
      
		define(plugins, function() {
			console.log('Custom plugins loaded');
		});
	  
	*/		
	
		// опрделение модуля 'live', с зависмостью от модуля 'jquery.1.7.1'
		define('live', ['menu', 'sub-menu', 'jquery.1.7.1'], function(scope) {
			console.log('live scope вне функции:', scope);
			console.log('live scope вне функции:',$.fn, $, window.jQuery)			
			
			return (function(m, s, jq) {
				console.log('live callback: ', m, s, jq);
			})(scope['menu'], scope['sub-menu'], scope['jquery.1.7.1']);
		});
		
	
		// опрделение модуля 'menu'
		define('sub-menu', function() {
			var b = 4;
			return b;
		});

		// опрделение модуля 'menu'
		define('menu', function() {
			var a = 1;
			return a;
		});		
  
		// опрделение модуля 'jquery.1.7.1' с указанным path в обьекте
		define('jquery.1.7.1', {path: 'https://code.jquery.com/jquery-1.7.1.min.js'}, function(scope) {
			console.log('1.7');
			
		
			/*
			return (function($) {
				console.log( $.fn );
				return $;
			})(jQuery)
			*/
			var a = 10;
			return a;
		});	
		
    </script>
  </body>
</html>